<ng-template [ngIf]="dataset$ | async">
  <ng-template [ngIf]="maxFileSize && tooLargeFile">
    <span>
      <mat-icon class="warning-icon"> warning </mat-icon>
      <span [innerHTML]="hasFileAboveMaxSizeWarning()"></span>
    </span>
  </ng-template>

  <ng-template [ngIf]="maxFileSize">
    <div>
      <mat-icon> info </mat-icon>
      Maximum allowed download size: {{ maxFileSize | filesize }}
    </div>
  </ng-template>

  <ng-template [ngIf]="tableData && maxFileSize">
    <div class="selected" fxLayout="row" fxLayoutAlign="space-evenly end">
      <div fxFlex="auto" style="margin-bottom: 0.5em">
        Selected: {{ selectedFileSize | filesize
        }}{{ maxFileSize ? " / " + (maxFileSize | filesize) : "" }}
      </div>
    </div>
  </ng-template>

  <div class="datafiles-header">
    <span [ngPlural]="count" class="nbr-of-files">
      <ng-template ngPluralCase="=0">No datafiles.</ng-template>
      <ng-template ngPluralCase="=1">1 datafile.</ng-template>
      <ng-template ngPluralCase="other">{{ count }} datafiles.</ng-template>
    </span>
    <div *ngIf="(datablocks$ | async) && (datablocks$ | async)?.length === 0">
      <h3>No files associated to this dataset</h3>
    </div>

    <configurable-actions
      [actionsConfig]="appConfig.datafilesActions"
      [actionDataset]="actionDataset"
      [files]="files"
    ></configurable-actions>
  </div>

  <app-table
    [data]="tableData"
    [columns]="tableColumns"
    [paginate]="true"
    [currentPage]="currentPage"
    [dataCount]="count"
    [dataPerPage]="pageSize"
    (pageChange)="onPageChange($event)"
    [select]="fileDownloadEnabled"
    (selectAll)="onSelectAll($event)"
    (selectOne)="onSelectOne($event)"
  >
  </app-table>
</ng-template>
